/*=============================================================================
Copyright Enarka India Pvt Ltd (EIPL) All Rights Reserved.
All trademarks are owned by Enarka India Private Limited
============================================================================ */

/*==============================================================================
 @file  rte_hardware.c
 @author OHMLAP0112   
 @date 22-Mar-2022

 @brief Description
==============================================================================*/

/*==============================================================================
 Includes
==============================================================================*/

#include "F28x_Project.h"
#include <stdint.h>

/*==============================================================================
 Defines
==============================================================================*/

/*==============================================================================
 Enums
==============================================================================*/

/*==============================================================================
 Structures
==============================================================================*/

/*==============================================================================
 Macros
==============================================================================*/
#define PWM_COUNT               (3200U)
#define TMR0_COUNT              (8000UL-1UL)
#define TMR1_COUNT              (80000UL-1UL)
#define TMR2_COUNT              (800000UL-1UL)

/*==============================================================================
 Local Function Prototypes
==============================================================================*/
//static void disable_watchdog(void);
void hw_service_wdog(void);
void hw_disable_wdog(void);
void hw_enable_wdog(void);
//static void disable_watchdog(void);

/*==============================================================================
 Local Variables
==============================================================================*/

/*==============================================================================
 Local Constants
==============================================================================*/

/*=============================================================================
 @brief infinite loop for the main where tasks are executed is defined here

 @param void
 @return void
 ============================================================================ */

void hw_enable_wdog(void)
{
//    __eallow();
//    WdRegs.SCSR = 2U;
//    WdRegs.WDCR= 0x005EU;
//    __edis();
}

void hw_disable_wdog(void)
{
    volatile Uint16 temp;

    //
    // Grab the clock config first so we don't clobber it
    //
    EALLOW;
    temp = WdRegs.WDCR.all & 0x0007;
    WdRegs.WDCR.all = 0x0068 | temp;
    EDIS;

}

void hw_service_wdog(void)
{
    EALLOW;
    WdRegs.WDKEY.bit.WDKEY = 0x0055;
    WdRegs.WDKEY.bit.WDKEY = 0x00AA;
    EDIS;
}



/*==============================================================================
 End of File
==============================================================================*/
