/*=============================================================================
Copyright Enarka India Pvt Ltd (EIPL) All Rights Reserved.
All trademarks are owned by Enarka India Private Limited
============================================================================ */

/*==============================================================================
 @file  rte_timer.c
 @author OHMLAP0112   
 @date 22-Mar-2022

 @brief Description
==============================================================================*/

/*==============================================================================
 Includes
==============================================================================*/

#include "F28x_Project.h"

#include <stdint.h>
#include "rte_timer.h"
/*==============================================================================
 Defines
==============================================================================*/

/*==============================================================================
 Enums
==============================================================================*/

/*==============================================================================
 Structures
==============================================================================*/

/*==============================================================================
 Macros
==============================================================================*/

/*==============================================================================
 Local Function Prototypes
==============================================================================*/

void timer_init(void);
void timer_isr_task(void);
bool timer_is_expired(uint32_t tmr);
uint32_t timer_get_tick(void);
/*==============================================================================
 Local Variables
==============================================================================*/
static volatile uint32_t tick_count;
/*==============================================================================
 Local Constants
==============================================================================*/

/*=============================================================================
 @brief infinite loop for the main where tasks are executed is defined here

 @param void
 @return void
 ============================================================================ */
void timer_init(void)
{
    tick_count = 0;
}

bool timer_is_expired(uint32_t tmr)
{
    uint32_t ticks;

    ticks = tick_count;
    if (ticks > tmr)
    {
        if ((ticks - tmr) > 0x80000000UL)
            return false;
        else
            return true;
    }
    else if (ticks < tmr)
    {
        if ((tmr - ticks) > 0x80000000UL)
            return true;
        else
            return false;
    }
    else
    {
        return true;
    }
}

uint32_t timer_get_tick(void)
{
    return tick_count;
}

void timer_isr_task(void)
{
    ++tick_count;
}



/*==============================================================================
 End of File
==============================================================================*/
