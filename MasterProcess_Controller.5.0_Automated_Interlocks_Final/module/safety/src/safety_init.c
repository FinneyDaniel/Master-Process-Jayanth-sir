/*=============================================================================
Copyright Enarka India Pvt Ltd (EIPL) All Rights Reserved.
All trademarks are owned by Enarka India Private Limited
============================================================================ */

/*==============================================================================
 @file  safety_init.c
 @author JOTHI RAMESH
 @date 26-Jan-2022

 @brief Description
==============================================================================*/

/*==============================================================================
 Includes
==============================================================================*/

#include "F28x_Project.h"
#include <stdint.h>
#include "safety_lib.h"
#include "safety_lib_prv.h"

/*==============================================================================
 Defines
==============================================================================*/

/*==============================================================================
 Enums
==============================================================================*/

/*==============================================================================
 Structures
==============================================================================*/

/*==============================================================================
 Macros
==============================================================================*/

/*==============================================================================
 Local Function Prototypes
==============================================================================*/

void safety_fninit(void);
void safety_fnslotAll(void);   // CALL THIS FUNCTION IN MAIN.C
/*==============================================================================
 Local Variables
==============================================================================*/

/*==============================================================================
 Local Constants
==============================================================================*/

/*=============================================================================
 @brief infinite loop for the main where tasks are executed is defined here

 @param void
 @return void
 ============================================================================ */
void safety_fninit(void)   // CALL THIS FUNCTION IN MAIN.C
{
   __disable_interrupts();

    // Make all outputs off
   // GpioDataRegs.GPACLEAR.all = 0xFFFFFFFFUL;
  //  GpioDataRegs.GPACLEAR.all = 0xFFFFFFFFUL;

     safety_fnLog_Monitoring_init();
     safety_fnNv_mem_crc_init();
//    mem_march_test_init();
#ifdef MICROELECTRONIC_TESTING_ENABLE
    fault_test_init();
#endif
}
/*=============================================================================
 @brief infinite loop for the main where tasks are executed is defined here

 @param void
 @return void
 ============================================================================ */
void safety_fnslotAll(void)   // CALL THIS FUNCTION IN MAIN.C
{
    sl_fnCPU_RegistersTest();
    sl_fnFPU_RegistersTest();
    sl_fnVCU_RegistersTest();
    sl_nv_mem_crc_test();
    HW_fnSafeCheck(); // hardware safety checks
}
/*==============================================================================
 End of File
==============================================================================*/
